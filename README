










1. Clone
2. Download a oracle-jdk binary (eg http://www.oracle.com/technetwork/java/javase/downloads/jdk-6u31-download-1501634.html) to puppet/modules/java/files.

Make sure you download the correct version: certain images on ec2 are 64bit only, some are 32bit, others support both.

3. In jajc/setup.yml:
   a. Specify in the java section of the userConfig the filename of the file you just downloaded
   b. Set the provider (only byon works for now)
   c. Set the instances, in the case of byon you must set the hostnames (these must be resolvable), the number value will be ignored.

Properties that are the same for all the instances in the  byon cluster can be specified in the byon-section of the providerSpecificInfo. You can override these properties in the options section of an instance.

The roles are specified as puppet classes, you can find these by looking at the *.pp files in puppet/modules/../manifests.

   d. Specify your lily repository credentials in the lily-section of the userConfig.
   e. You can add as many options as you want for the cdh3 services in their respective sections in userConfig, they will be set accordingly when the cluster starts.
   
4. Create a tarball of the puppet/modules directory and place it in the jajc directory:
   In the puppet directory: execute tar czf ../jajc/modules.tgz modules/

5. In the jajc directory : execute "mvn exec:java"

After a while the build will be completed and puppet should run on the cluster.

To see what puppet is doing and if everything is going ok, you can log in to a node of the cluster and tail -f /var/log/syslog, this is where you can see the progress of the puppet agent.


If everything went smoothly the hadoop namenode, datanodes, jobtracker and tasktrackers as well as zookeeper and hbase should be up and running. A quick check of the webinterfaces for these services can confirm this.
namenode:     http://<hostname-namenode>:50070
jobtracker:   http://<hostname-jobtracker>:50030
hbase-master: http://<hostname-hbasemaster>:60010

Limitations:
HBase requires a zookeeper quorum, so hbase-services will only start correctly if a quorum is available.
Lily will not start automatically since it's dependent on HBase and Zookeeper.
No rpm support



CREDITS:
apt module from https://github.com/camptocamp/puppet-apt